# 🌽 Defender: Tower Defense Game (Unity)

**Defender** — это 2D-игра в жанре tower defense, разработанная на Unity. Игрок защищает початок кукурузы (`Corn`) от волны врагов, используя арбалет для стрельбы стрелами. За убийство врагов начисляются кристаллы, которые можно потратить на улучшение здоровья кукурузы. Игра сохраняет прогресс между сессиями через `PlayerPrefs`.

---

## 🎮 Геймплей

- Защитите **кукурузу** от наступающих врагов.
- Стреляйте **стрелами** с помощью арбалета, наводя его на курсор мыши.
- Убивайте врагов — получайте **кристаллы**.
- Тратьте кристаллы на **улучшение здоровья** кукурузы.
- Проходите уровни: каждая волна сложнее предыдущей.
- Игра заканчивается, если здоровье кукурузы достигает нуля.

---

## 📁 Структура проекта

### Основные классы:

| Класс | Описание |
|-------|----------|
| `Corn.cs` | Главный объект защиты. Хранит здоровье и кристаллы игрока. |
| `Enemy.cs` | Враги, движущиеся к кукурузе и атакующие её. |
| `Crossbow.cs` + `ArrowMover.cs` | Система стрельбы: арбалет поворачивается за мышью, выпускает стрелы. |
| `Spawner.cs` | Генерирует врагов с заданным интервалом и количеством на уровень. |
| `LevelController.cs` | Управляет состоянием уровня: победа/поражение, загрузка следующего уровня. |
| `UpgradeController.cs` | Отвечает за улучшение здоровья кукурузы за кристаллы. |
| `SaveController.cs` | Сохраняет данные игры: уровень, кристаллы, улучшения. |
| `UI-компоненты` (`CrystalUI`, `HealthUI`, `LevelUI`) | Отображают текущие значения на экране. |
| `MenuButton.cs`, `StartButton.cs`, `ExitButton.cs` | Управление сценами и выходом из игры. |

---

## ⚙️ Механики

### 🌾 Кукуруза (`Corn`)
- Начальное здоровье: 10 (настраивается).
- Улучшение здоровья: +2 за каждое улучшение.
- Хранит кристаллы игрока.
- При потере всего здоровья — **игра окончена**.

### 👾 Враги (`Enemy`)
- Двигаются к кукурузе.
- Атакуют при приближении.
- При уничтожении дают кристаллы.
- Скорость зависит от уровня: `базовая + (уровень * бонус)`.
- Активные враги хранятся в статическом списке для отслеживания конца волны.

### 🏹 Арбалет и стрелы
- Поворачивается за курсором мыши.
- Стреляет по нажатию ЛКМ с задержкой.
- Стрелы уничтожают врагов при столкновении.

### 📈 Улучшения
- Улучшение здоровья кукурузы за кристаллы.
- Цена улучшения: 5 кристаллов (настраивается).
- Сохраняется между сессиями.

### 🔄 Сохранение
- Используется `PlayerPrefs`:
  - `level` — текущий уровень.
  - `crystals` — количество кристаллов.
  - `healthGrade` — уровень улучшения здоровья.

---

## 🧩 Как запустить

1. Откройте проект в **Unity 2021.3+** (или совместимой версии).
2. Убедитесь, что сцена `Menu` (индекс 0) и `Game` (индекс 1) настроены в Build Settings.
3. Нажмите Play — начните игру через главное меню.

> 💡 Совет: Для очистки сохранений добавьте кнопку, вызывающую `SaveController.ClearSave()`.

---

## 🛠️ Настройка баланса

Вы можете настроить параметры прямо в инспекторе Unity:

- **Corn**: `StartHealth`, `UpgredeHealth`
- **Enemy**: `BaseSpeed`, `AttackInterval`, `KillReward`, `Health`
- **Spawner**: `SpawnInterval`, `BaseSpawnCount`
- **Crossbow**: `Shoot Delay`
- **UpgradeController**: `HealthGradePrice`

---

## 📈 Прогресс и сохранение

Игра автоматически сохраняет:
- Текущий уровень
- Количество кристаллов
- Уровень улучшения здоровья

Сохранения сбрасываются только при вызове `SaveController.ClearSave()`.

---

## 🎯 Цель проекта

Этот проект — отличный пример простой, но полноценной tower defense игры с:
- Сохранением прогресса
- Системой улучшений
- Генерацией врагов
- UI и управлением сценами

Подходит для обучения основам Unity, C#, архитектуре игр и системе сохранений.

---

## 📜 Лицензия

MIT — используйте, модифицируйте и обучайтесь!

---

## 🤝 Автор

Разработано с ❤️ для обучения и вдохновения.  
**Defender** — ваш первый шаг в создании игр на Unity!

---

> 🌟 Совет разработчику:  
> Добавьте звуки, частицы, анимации и меню настроек — и игра заиграет по-новому!

---

**Удачи в защите кукурузы! 🌽🏹**
